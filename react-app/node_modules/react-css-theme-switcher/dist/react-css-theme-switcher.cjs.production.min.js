"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react");!function(e){e.idle="idle",e.loading="loading",e.loaded="loaded"}(e||(e={}));var n=t.createContext(void 0);exports.ThemeSwitcherProvider=function(r){var o=r.themeMap,i=r.insertionPoint,a=r.defaultTheme,d=r.id,u=void 0===d?"current-theme-style":d,c=r.attr,l=void 0===c?"data-theme":c,s=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}(r,["themeMap","insertionPoint","defaultTheme","id","attr"]),h=t.useState(e.idle),f=h[0],m=h[1],v=t.useState(),p=v[0],b=v[1],y=t.useCallback((function(e){if(!i)return document.head.appendChild(e);var t=function(e){for(var t=document.head,n=0;n<t.childNodes.length;n++){var r,o=t.childNodes[n];if(8===o.nodeType&&(null==o||null===(r=o.nodeValue)||void 0===r?void 0:r.trim())===e)return o}return null}(i);if(!t)return console.warn("Insertion point '"+i+"' does not exist. Be sure to add comment on head and that it matches the insertionPoint"),document.head.appendChild(e);var n=t.parentNode;return n?n.insertBefore(e,t.nextSibling):void 0}),[i]),g=t.useCallback((function(t){var n=t.theme;if(n!==p){var r=document.getElementById(u);if(r&&r.remove(),!o[n])return console.warn("Could not find specified theme");m(e.loading);var i=function(e){for(var t=document.createElement("link"),n=0,r=Object.entries(e);n<r.length;n++){var o=r[n],i=o[0];"onload"!==i?t[i]=o[1]:t.onload=e.onload}return t}({type:"text/css",rel:"stylesheet",id:u,href:o[n],onload:function(){m(e.loaded)}});y(i),b(n),document.body.setAttribute(l,n)}}),[o,y,l,u,p]);t.useEffect((function(){a&&g({theme:a})}),[a]),t.useEffect((function(){Object.keys(o).map((function(e){var t="theme-prefetch-"+e;if(!document.getElementById(t)){var n=document.createElement("link");n.rel="prefetch",n.type="text/css",n.id=t,n.href=o[e],y(n)}return""}))}),[o,y]);var w=t.useMemo((function(){return{switcher:g,status:f,currentTheme:p,themes:(e=Object.keys(o),t={},e.forEach((function(e){return t[e]=e})),t)};var e,t}),[g,f,p,o]);return t.createElement(n.Provider,Object.assign({value:w},s))},exports.useThemeSwitcher=function(){var e=t.useContext(n);if(!e)throw new Error("To use `useThemeSwitcher`, component must be within a ThemeSwitcherProvider");return e};
//# sourceMappingURL=react-css-theme-switcher.cjs.production.min.js.map
